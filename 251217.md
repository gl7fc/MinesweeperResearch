# 課題
推論に必要なテクニックを判別するプログラムを実装する

# 目的
- DLXを理解
- DLXを使ってソルバー実装
  - 制約行列の設定
  - 列削除部分の改良
  - 制約行列を盤面から計算
  - DLXで制約を満たす盤面を求める
- 盤面生成プログラム作成
- 難易度評価実装
  - 推論に必要なヒントの個数
  - 推論に必要なテクニックの判別 ← 今ココ
  - ヒントの個数と必要なテクニックを統合して難易度を計算
- 分析
  - ？

# 方法
1. 実装方針を決める
2. 実装する

# 結果
## 実装方針
### データ構造 Region
#### フィールド
- `cells`: 未確定セルの集合
- `mines`: 集合内の地雷数
- `originLevel`: そのRegionが生成されたテクニックのレベル
- `sourceHints`: Region生成の根拠となったヒント数字

#### Regionのレベル
1. 盤面のヒント数字から生成
2. 包含関係にあるヒント数字から生成
3. 共通部分をもつヒント数字から生成

### 解析エンジン TechniqueAnalyzer
#### 処理の流れ
1. 初期化: 初期盤面のヒントから初期 Region を生成する. 
2. ループ: 盤面に変化がなくなるまで以下を繰り返す. 
   1. ソート: Region をレベルの低い順にソート
   2. 判定: 「Region 内の未確定セル数 == 地雷数」 または 「地雷数 == 0」なら地雷または安全セルが確定
   3. 更新: 確定したセルを盤面に反映, Region のレベルを難易度として記録
   4. 再生成: レベル1の Region を再生成

#### Region の生成
1. レベル1 Region
   - 現在の盤面, 数字ヒントから毎回全て再生成
   - 常に最新の盤面状態を反映する
2. レベル2/3 Region
   - ループの初回のみ, 初期盤面のレベル1 Region 同士を組み合わせて生成
   - 以降のループでは新規生成せず, 既存の Region から確定したセルを削除するのみ
   
#### Region 生成ロジック
##### レベル1
盤面上のヒント数字から直接生成
##### レベル2(包含)
1. ヒント数字のすべてのペアについて, 周囲8セルの集合が包含関係になっているか確認
2. $A \subset B$ のとき, $B - A$ をレベル2として Region を生成
##### レベル3(共通)
1. ヒント数字のすべてのペアについて, 周囲8セルの集合に共通部分があるか確認(共通部分を持つ3つ以上のヒントの組については未定)
2. $A$ と $B$ の共通部分 $C$ の地雷数の範囲 $[\min C, \max C]$ を計算
   - $\max C = \min(|C|, A, B)$ 
   - $\min C = \max(0, A - |\mathrm{Only}A|, B - |\mathrm{Only}B|)$ 
3. $\max C = \min C$ なら共通部分の地雷数は確定 → $\mathrm{Only}A, \mathrm{Only}B, C$ をレベル3として Region を生成



## 実装結果


# 考察

# 結論